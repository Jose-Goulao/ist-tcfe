%-------------------------------------------------------------------------------------------------------
%-------------------------------------------------------------------------------------------------------
% Sec & Label

\section{Simulation Analysis}
\label{sec:simulation}


%-------------------------------------------------------------------------------------------------------
%-------------------------------------------------------------------------------------------------------
% Intro

In this section, Circuit T3 is reproduced with the help of Ngspice.

Ngspice is a simulator for eletronic circuits that can output a variety of results.
This emulator computes the voltages in every node, as well as the potential difference
between two given nodes. Apart from that, the group made use of the command
{\em .options savecurrents} which also enables the output of the currents that pass
through all branches. Moreover, function to help determine de minimum, maximum and average
of the plots were also used.


Firstly, the outcome of the simulation is shown, as well as a brief explanation
on how it was achived. Afterwards, a comparison is done between those values and
the ones attained in Section \ref{sec:analysis}.



%-----------------------------------------------------------------------
%-----------------------------------------------------------------------
% 			     Results - subsec
% ----------------------------------------------------------------------
% ----------------------------------------------------------------------

\subsection{Simulated results}
\label{subsec:sim_res}


% ----------------------------------------------------------------------
% Text


In this laboratory assignament, the Ngspice script made use of the sames values considered for
the Octave script.

Firstly, a transient analysis between $t=0ms$ and $t=150ms$ was performed. This operation
only had the goal to provide us a plot (Figure \ref{fig:graph_global}) for the
$v_{out}$ in the beginning compare it to the desired outup voltage ($12V$).

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.5\linewidth]{trans-vout_vr_all.eps}
	\caption{Inicial $v_{out}$}
\label{fig:graph_global}
\end{figure}


Aditionally, a transient analysis between $t=150ms$ and $t=350ms$ was carried out. Three plots
were obtained. Figure \ref{fig:EV_vout} shows the output voltage of the Envelope Detector
Circuit. Figure \ref{fig:VR_vout} shows the output voltage of the Voltage Regulator Circuit.
Finaly, \ref{fig:AC+DC} shows the output voltage of the Voltage Regulator Circuit minus $12V$
($v_{out}-12$).


\begin{figure}[ht]
	\centering
	\includegraphics[width=0.6\linewidth]{trans-vout_ed.eps}
	\caption{Envelope Detector Circuit $v_{out}$}
\label{fig:EV_vout}
\end{figure}

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.6\linewidth]{trans-vout_vr.eps}
	\caption{Voltage Regulator Circuit $v_{out}$}
\label{fig:VR_vout}
\end{figure}

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.6\linewidth]{trans-vout_(ac+dc).eps}
	\caption{Output AC component + DC deviation}Vout(MAX) - Vout(MIN)
\label{fig:AC+DC}
\end{figure}


As mentioned before, function to determine the minimum, maximum and average of the
plots were also used. Table \ref{tab:trans} shows the average, maximum and minimum
of the plot in Figure \ref{fig:VR_vout}, in that order. In adition, the Ripple
(Vout(MAX) - Vout(MIN)) is also presented.


\begin{table}[ht]
	\centering
	\begin{tabular}{|l|r|}
		\hline    
		{\bf Name} & {\bf Value [V]} \\ \hline
		\input{trans_tab}
	\end{tabular}
	
	\caption{Values from Ngspice related to the Voltage Regulator Circuit.}
    
\label{tab:trans}
\end{table}

Lastly, the group also used Ngspice to compute the Merit. This was done, only to confirm
the value obtained in Subsection \ref{subsec:res_the}.

\begin{table}[ht]
	\centering
	\begin{tabular}{|l|r|}
		\hline    
		{\bf Name} & {\bf Value [MU]} \\ \hline
    		\input{cost_tab}
	\end{tabular}
	
	\caption{Simulated values for the Costs and Merit.}
    
\label{tab:op}
\end{table}


%-----------------------------------------------------------------------
%-----------------------------------------------------------------------
% 			     Comp - subsec
% ----------------------------------------------------------------------
% ----------------------------------------------------------------------

\subsection{Comparison}


% ----------------------------------------------------------------------
% Text




