%-------------------------------------------------------------------------------------------------------
%-------------------------------------------------------------------------------------------------------
% Sec & Label

\section{Simulation Analysis}
\label{sec:simulation}


%-------------------------------------------------------------------------------------------------------
%-------------------------------------------------------------------------------------------------------
% Intro

In this section, Circuit T4 is reproduced with the help of Ngspice.

Ngspice is a simulator for eletronic circuits that can output a variety of results.
This emulator computes the voltages in every node, as well as the potential difference
between two given nodes. Apart from that, the group made use of the command
{\em .options savecurrents} which also enables the output of the currents that pass
through all branches. Moreover, function to help determine de minimum, maximum and average
of the plots were also used.


Firstly, the outcome of the simulation is shown, as well as a brief explanation
on how it was achived. Afterwards, a comparison is done between those values and
the ones attained in Section \ref{sec:analysis}.



%-----------------------------------------------------------------------
%-----------------------------------------------------------------------
% 			     Results - subsec
% ----------------------------------------------------------------------
% ----------------------------------------------------------------------

\subsection{Simulated results}
\label{subsec:sim_res}

\subsubsection{Coupling Capacitors}

The purpose of the coupling capacitors on the audio amplifier circuit is to eliminate the DC component of a signal and only pass the AC component, which in the case of an audio amplifier is what carries the sound information.

This arrangement of capacitors is normally used to link/couple (that’s where it´s name comes from) only the AC signal of one circuit to another.

\subsubsection{Bypass capacitor}

A bypass capacitor’s purpose is to remove the AC component of a signal by shorting it to ground.
For this to work, the bypass is placed in parallel with a resistance. Since the capacitor’s impedance follows the equation |Z_c |=1/wC , for DC signals (w=0) the impedance is infinite and so all the current flows trough the resistor. When the frequency increases, the capacitor’s impedance decreases and so a larger part of the signal passes trough the capacitor directly to ground. This way, the DC signal is the main contributor to the voltage difference between the components, while the AC signal directed to ground without any resistance.
In our application, the bypass capacitor is used to allow to have the resistance RE without degenerating the gain. The resistance RE adds temperature stabilization and removes the temperature dependency of the gain in the circuit has the drawback of decreasing the AC gain of the amplifier. For this purpose, only the DC component needs to be affected by the resistance RE and for this reason, the bypass capacitor is used so that higher frequencies aren’t affected by RE. This way we can achieve the best of temperature stabilization without gain degeneration.

\subsubsection{Effect of Resistace }
% ----------------------------------------------------------------------
% Text


In this laboratory assignament, the Ngspice script made use of the sames values considered for
the Octave script.


\begin{figure}[ht]
	\centering
	\includegraphics[width=0.6\linewidth]{vo1.eps}
	\caption{Inicial $v_{out}$}
\label{fig:graph_global}
\end{figure}

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.6\linewidth]{vo1f.eps}
	\caption{Envelope Detector Circuit $v_{out}$}
\label{fig:EV_vout}
\end{figure}

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.6\linewidth]{vo2f.eps}
	\caption{Voltage Regulator Circuit $v_{out}$}
\label{fig:VR_vout}
\end{figure}



Lastly, the group also used Ngspice to compute the Merit. Table \ref{tab:merit} shows all the 
values necessary to compute the Merit, as well as the Merit itself.

\begin{table}[h]
	\centering
	\begin{tabular}{|l|r|}
		\hline    
		{\bf Name} & {\bf Value} \\ \hline
    		\input{geral_tab}
	\end{tabular}
	
	\caption{Values from Ngspice.}
    
\label{tab:op_sim}
\end{table}

\begin{table}[h]
	\centering
	\begin{tabular}{|l|r|}
		\hline    
		{\bf Name} & {\bf Value[Ohm]} \\ \hline
    		\input{INPUTimp_tab}
    		\input{Outimp_tab}
	\end{tabular}
	
	\caption{Values from Ngspice.}
    
\label{tab:imp_sim}
\end{table}

\begin{table}[h]
	\centering
	\begin{tabular}{|l|r|}
		\hline    
		{\bf Name} & {\bf Value} \\ \hline
    		\input{merit_tab}
	\end{tabular}
	
	\caption{Values from Ngspice.}
    
\label{tab:merit}
\end{table}


